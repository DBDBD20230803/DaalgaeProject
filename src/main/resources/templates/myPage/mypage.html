<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layouts/myPageLayout}">
<head>
    <meta charset="utf-8">
    <title>마이페이지</title>
</head>


<th:block layout:fragment="content">
    <section id="myPage">
        <div class="myPageBg"><h3>마이페이지</h3></div>

        <div class="myPageWrap container">

            <div class="myPageContents">
                <div class="myPageBoxLeft">

                    <div class="myPageProfileImgBox">
                        <div class="profileImg"></div>

                        <div class="gum"><a th:href="@{/payment/useHistory}"><span th:text="${#authentication.getPrincipal().getMemDogGum()}"></span> <img src="/images/gum.png" alt="gum"></a></div>
                        <form action="single-file" method="post" enctype="multipart/form-data">
                            <label for="profileChange">
                                <div class="changeFileImgage">프로필 사진 변경</div>
                            </label>
                            <input type="file" name="profileChange" value="profileChange" id="profileChange"/>
                            <div class="introPet">
                                <p class="introPetTitle">
                                                <span>
                                                    <img src="/images/paw.png" alt="paw">
                                                </span>
                                    반려견 소개
                                </p>
                                <label for="introPetEdit">
                                    <div class="petEditIcon"><img src="/images/complete.png" alt="edit"></div>
                                </label>
                                <input type="submit" name="introPetEdit" value="introPetEdit" id="introPetEdit"/>
                            </div>
                            <textarea class="profileText" name="petIntroduce" placeholder="반려견을 소개해주세요."></textarea>
                        </form>
                    </div>

                    <div class="myPageHistory">
                        <div class="activityHistory"><a href="">활동 내역</a></div>
                        <div class="payHistory"><a href="">결제 내역</a></div>
                        <form action="" method="post">
                            <input type="button" name="changePwd" id="changePwd" readonly value="비밀번호 수정" />
                            <input type="button" name="activityHistory" id="resign" readonly value="탈퇴"/>
                        </form>
                    </div>

                </div>



                <div class="myPageBoxRight">
                    <p>기본 정보</p>

                    <div class="myInfo">
                        <form th:action="@{/myPage/updateInfo}" method="post" class="myPageSubmit">

                            <div class="myIdBox">
                                <input type="text" name="memId" id="myId" th:value="${ #authentication.getPrincipal().getMemId()}" class="myId" readonly/>
                                <input type="hidden" name="memCode" id="memCode" th:value="${ #authentication.getPrincipal().getMemCode() }">
                                <button type="button" id="myInfoChange" class="myInfoChange" name="myInfoChange">수정</button>
                            </div>

                            <div class="myInfo1">
                                <div class="myInfoTitle"><img src="/images/email.png" alt="email"> &nbsp;&nbsp;이메일</div>

                                <div class="myInfoInputs myInfo1Inputs">
                                    <label for="myEmail"></label>
                                    <input type="text" id="myEmail" name="memEmail" th:value="${#authentication.getPrincipal().getMemEmail()}" readonly/>
                                </div>
                            </div>

                            <div class="myInfo2">
                                <div class="myInfoTitle"><img src="/images/name.png" alt="name"> &nbsp;&nbsp;이름</div>

                                <div class="myInfoInputs myInfo2Inputs">
                                    <label for="myName"></label>
                                    <input type="text" id="myName" name="memName" readonly th:value="${#authentication.getPrincipal().getMemName()}"/>
                                </div>
                            </div>

                            <div class="myInfo3">
                                <div class="myInfoTitle"><img src="/images/adress.png" alt="adress"> &nbsp;&nbsp;주소지</div>

                                <div class="myInfoInputs myInfo3Inputs">
                                    <label for="myAdress"></label>
                                    <input type="text" id="myAdress" name="memAdrs" readonly th:value="${#authentication.getPrincipal().getMemAdrs()}" class="changeInputs"/>
                                </div>
                            </div>

                            <div class="myInfo3_1">
                                <div class="myInfoTitle"><img src="/images/adress.png" alt="adress"> &nbsp;&nbsp;상세주소</div>

                                <div class="myInfoInputs myInfo3Inputs">
                                    <label for="myAdress"></label>
                                    <input type="text" id="myAdress2" name="memAdrsDetail" readonly th:value="${#authentication.getPrincipal().getMemAdrsDetail()}" class="changeInputs"/>
                                </div>
                            </div>

                            <div class="myInfo4">
                                <div class="myInfoTitle"><img src="/images/birth.png" alt="birth"> &nbsp;&nbsp;생년월일</div>

                                <div class="myInfoInputs myInfo4Inputs">
                                    <label for="myBirth"></label>
                                    <input type="date" id="myBirth" name="memBirth" readonly th:value="${#dates.format(#authentication.getPrincipal().getMemBirth(), 'yyyy-MM-dd')}" class="changeInputs"/>
                                </div>
                            </div>

                            <div class="myInfo5">
                                <div class="myInfoTitle"><img src="/images/pet.png" alt="pet"> &nbsp;&nbsp;반려견</div>

                                <div class="myInfoInputs myInfo5Inputs">
                                    <label for="myPet"></label>
                                    <input type="text" id="myPet" name="petNick" placeholder="반려견을 등록해주세요." th:value="${petNick}" readonly/>
                                </div>
                                <div class="spreadBtn spreadBtn1">접기 <i class="xi-angle-up-thin xi-x"></i></div>
                            </div>

                        </form>
                    </div>


                    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
                    <script th:inline="javascript">
                        const $myAdress = document.getElementById("myAdress");

                        $myAdress.onclick = function() {

                            /* 다음 우편번호 검색 창을 오픈하면서 동작할 콜백 메소드를 포함한 객체를 매개변수로 전달한다. */
                            new daum.Postcode({
                                oncomplete: function(data){
                                    /* 팝업에서 검색결과 항목을 클릭했을 시 실행할 코드를 작성하는 부분 */
                                    document.getElementById("myAdress").value = data.address;
                                    document.getElementById("myAdress2").focus();
                                }
                            }).open();
                        }
                    </script>


                    <div class="dogInfo">

                        <div class="dogInfoMore">
                            <form action="" method="post" class="dogInfoMoreContent">

                                <div class="petInfo1">
                                    <div class="petName">
                                        <div class="dogInfoTitle"><img src="/images/pet.png" alt="pet"> &nbsp;&nbsp;반려견</div>
                                        <input type="text" name="petNick" id="petName" class="petInput" th:value="${petNick}"/>
                                        <input type="hidden" name="refMemCode" id="refMemCode" th:value="${#authentication.getPrincipal().getMemCode()}">
                                    </div>


                                    <div class="petBreed">
                                        <div class="dogInfoTitle"><img src="/images/breed.png" alt="breed"> &nbsp;&nbsp;견종</div>
                                        <input type="text" name="petKind" id="petBreedName" class="petInput" th:value="${petKind}"/>
                                    </div>
                                </div>


                                <div class="petInfo2">
                                    <div class="petBirth">
                                        <div class="dogInfoTitle"><img src="/images/birth.png" alt="scissor">&nbsp;&nbsp; 생년월일</div>
                                        <input type="date" name="petBirth" id="petBirthDay" class="petInput" th:value="${petListpetBirth}"/>
                                    </div>

                                    <div class="petGender">
                                        <div class="dogInfoTitle"><img src="/images/puppy_gender.png" alt="puppy_gender">&nbsp;&nbsp; 성별</div>
                                        <select name="petGender" id="petGenderAnswer" class="petSelect">
                                            <option th:value="female">female</option>
                                            <option th:value="male">male</option>
                                        </select>
                                        <script th:inline="javascript">
                                            let petGenderAnswer = $("#petGenderAnswer").val(petGenderAnswer);
                                        </script>
                                    </div>
                                </div>


                                <div class="petInfo3">
                                    <div class="petOper">
                                        <div class="dogInfoTitle"><img src="/images/scissor.png" alt="scissor">&nbsp;&nbsp; 중성화</div>
                                        <select name="petNeutered" id="petOperAnswer" class="petSelect">
                                            <option th:value="Y">Y</option>
                                            <option th:value="N">N</option>
                                        </select>
                                        <script th:inline="javascript">
                                            let petNeutered = $("#petGenderAnswer").val(petNeutered);
                                        </script>
                                    </div>

                                    <div class="petWeight">
                                        <div class="dogInfoTitle"><img src="/images/weight.png" alt="weight">&nbsp;&nbsp; 무게</div>
                                        <input type="text" name="petWeight" id="petWeightAnswer" class="petInput" th:value="${petWeight}"/>
                                    </div>
                                </div>

                                <div class="addDoneBtn"><input type="button" name="addDoneBtn" id="addDoneBtn" value="완료" required/></div>


                            </form>
                        </div>

                    </div>

                    <div class="addPet">
                        <form action="" method="post">
                            <label for="addPetBtn"></label>
                            <input type="button" name="addPetBtn" id="addPetBtn" class="addPetBtn" value="반려견 추가하기"/>
                        </form>
                    </div>

                </div>


                <div class="goToMain"><a th:href="@{/}">메인 페이지로 돌아가기</a></div>

            </div>


        </div>
    </section>

</th:block>

</html>